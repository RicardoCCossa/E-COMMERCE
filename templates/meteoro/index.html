{% extends 'partials/base.html' %}
{% load static %}
{% load currency_filters %}

{% block title %}Home {% endblock title %}

{% block content %}

<main>


  <section class="hero-section">
    <div id="mainCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">

      <!-- Indicadores -->
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active" aria-current="true"
          aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>

      <!-- Slides -->
      <div class="carousel-inner rounded-3 shadow-lg">

        <!-- Slide 1 -->
        <div class="carousel-item active">
          <img src="{% static 'images/banner/b1.jpg' %}" class="d-block w-100 img-fluid" alt="Banner 1">
          <div class="carousel-caption d-flex flex-column justify-content-center align-items-center">
            <h2 class="display-4 fw-bold animate__animated animate__fadeInDown">Novidades Incríveis</h2>
            <p class="lead mb-3 animate__animated animate__fadeInUp">Explore os melhores produtos com descontos
              exclusivos!</p>
            <a href="#" class="btn btn-primary btn-lg shadow px-4 animate__animated animate__fadeInUp">Comprar Agora</a>
          </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item">
          <img src="{% static 'images/banner/b2.jpg' %}" class="d-block w-100 img-fluid" alt="Banner 2">
          <div class="carousel-caption d-flex flex-column justify-content-center align-items-center">
            <h2 class="display-4 fw-bold animate__animated animate__fadeInDown">Ofertas Imperdíveis</h2>
            <p class="lead mb-3 animate__animated animate__fadeInUp">Aproveite promoções especiais e descontos
              relâmpago!</p>
            <a href="#" class="btn btn-warning btn-lg shadow px-4 animate__animated animate__fadeInUp">Ver Ofertas</a>
          </div>
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item">
          <img src="{% static 'images/banner/b3.jpg' %}" class="d-block w-100 img-fluid" alt="Banner 3">
          <div class="carousel-caption d-flex flex-column justify-content-center align-items-center">
            <h2 class="display-4 fw-bold animate__animated animate__fadeInDown">Lançamentos Exclusivos</h2>
            <p class="lead mb-3 animate__animated animate__fadeInUp">Seja o primeiro a conhecer nossos novos produtos!
            </p>
            <a href="#" class="btn btn-success btn-lg shadow px-4 animate__animated animate__fadeInUp">Descobrir</a>
          </div>
        </div>
      </div>

      <!-- Botões de navegação -->
      <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon rounded-circle bg-dark p-3" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon rounded-circle bg-dark p-3" aria-hidden="true"></span>
        <span class="visually-hidden">Próximo</span>
      </button>
    </div>
  </section>
  <style>
    .carousel-item img {
      height: 65vh;
      object-fit: cover;
      filter: brightness(75%);
      transition: transform 0.6s ease-in-out;
    }

    /* Efeito de zoom ao trocar slide */
    .carousel-item.active img {
      transform: scale(1.05);
    }

    /* Estilização do texto no carrossel */
    .carousel-caption {
      bottom: 20%;
      text-align: center;
      padding: 15px;
    }

    .carousel-caption h2 {
      font-size: 2.8rem;
      text-shadow: 0px 3px 8px rgba(0, 0, 0, 0.5);
    }

    .carousel-caption p {
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
      color: #f1f1f1;
    }

    /* Indicadores personalizados */
    .carousel-indicators [data-bs-target] {
      background-color: #007bff;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      opacity: 0.8;
    }

    .carousel-indicators .active {
      background-color: #0056b3;
      transform: scale(1.2);
    }
  </style>

  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center fw-bold mb-5">Busque por Categoria</h2>
      <div class="row g-4 justify-content-center">

        <!-- Exemplo de Card -->
        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'ML' %}" class="text-decoration-none">
              <img src="{% static 'images/products/moda.jpeg' %}" class="card-img-top rounded-top"
                alt="Moda e Lifestyle">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Moda & Lifestyle</h6>
              </div>
            </a>
          </div>
        </div>

        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'CL' %}" class="text-decoration-none">
              <img src="{% static 'images/products/celulares.jpg' %}" class="card-img-top rounded-top"
                alt="Celulares e Acessórios">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Celulares & Acessórios</h6>
              </div>
            </a>
          </div>
        </div>

        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'EL' %}" class="text-decoration-none">
              <img src="{% static 'images/products/eletronico.jpeg' %}" class="card-img-top rounded-top"
                alt="Eletrônicos">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Eletrônicos</h6>
              </div>
            </a>
          </div>
        </div>

        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'IN' %}" class="text-decoration-none">
              <img src="{% static 'images/products/informatica.jpeg' %}" class="card-img-top rounded-top"
                alt="Informática">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Informática</h6>
              </div>
            </a>
          </div>
        </div>

        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'CS' %}" class="text-decoration-none">
              <img src="{% static 'images/products/casa.jpeg' %}" class="card-img-top rounded-top"
                alt="Casa e Decoração">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Casa & Decoração</h6>
              </div>
            </a>
          </div>
        </div>

        <div class="col-6 col-md-4 col-xl-2">
          <div class="card shadow-sm border-0 h-100 category-card">
            <a href="{% url 'category' 'ES' %}" class="text-decoration-none">
              <img src="{% static 'images/products/lazer.jpg' %}" class="card-img-top rounded-top"
                alt="Esportes e Lazer">
              <div class="card-body text-center">
                <h6 class="fw-semibold text-dark">Esportes & Lazer</h6>
              </div>
            </a>
          </div>
        </div>

      </div>
    </div>
  </section>



  <section class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-5">Produtos que estão bombando!</h2>
      <div class="row g-4">

        {% for product in products %}
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="card h-100 shadow-sm border-0 rounded-3 product-card overflow-hidden position-relative">

            <!-- Badges -->
            {% if product.discounted_price < product.selling_price %} <span
              class="badge bg-danger position-absolute top-0 start-0 m-2">Oferta</span>
              {% endif %}
              {% if product.data_da_publicacao|date:"U" > now|date:"U"|add:"-604800" %}
              <!-- Produtos lançados nos últimos 7 dias -->
              <span class="badge bg-success position-absolute top-0 end-0 m-2">Novo</span>
              {% endif %}

              <!-- Imagem -->
              <a href="{% url 'product_detail' product.pk %}" class="text-decoration-none text-dark">
                <div class="d-flex justify-content-center align-items-center bg-white"
                  style="height: 220px; overflow:hidden;">
                  {% if product.product_image %}
                  <img src="{{ product.product_image.url }}" class="img-fluid h-100 product-img"
                    alt="{{ product.title }}" style="object-fit: contain; transition: transform 0.3s;">
                  {% else %}
                  <!-- SVG Placeholder -->
                  <svg class="bd-placeholder-img" width="100%" height="220" xmlns="http://www.w3.org/2000/svg"
                    role="img" preserveAspectRatio="xMidYMid slice" focusable="false">
                    <title>Sem imagem</title>
                    <rect width="100%" height="100%" fill="#f0f0f0"></rect>
                    <text x="50%" y="50%" fill="#999" dy=".3em" text-anchor="middle" font-size="18">
                      Sem imagem
                    </text>
                  </svg>
                  {% endif %}
                </div>

                <!-- Conteúdo -->
                <div class="card-body d-flex flex-column text-center">
                  <h5 class="card-title text-truncate" title="{{ product.title }}">
                    {{ product.title }}
                  </h5>
                  <p class="card-text small text-muted mb-2">
                    {{ product.composition|truncatewords:12 }}
                  </p>

                  <!-- Preço -->
                  <div class="mb-3">
                    <span class="text-muted text-decoration-line-through me-2">
                      {{ product.selling_price|metical }}
                    </span>
                    <span class="fw-bold text-danger fs-5">
                      {{ product.discounted_price|metical }}
                    </span>
                  </div>

                  <!-- Botão -->
                  <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary w-100 mt-auto">
                    Ver mais
                  </a>
                </div>
              </a>

          </div>
        </div>
        {% empty %}
        <p class="text-center">Nenhum produto disponível.</p>
        {% endfor %}

      </div>
    </div>
  </section>

  <!-- CSS Extra para hover profissional -->
  <style>
    .product-card:hover .product-img {
      transform: scale(1.05);
    }

    .product-card {
      transition: transform 0.3s;
    }

    .product-card:hover {
      transform: translateY(-4px);
    }
  </style>




  <!-- Example Code End -->
</main>

{% endblock content %}